---
title: "Pythagorean win ratio"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---



```{r setup}

library(tidyverse)
library(Lahman)

```


Bill James, the godfather of Sabermetrics, developed the Pythagorean win ratio or win expectation model ([wikipedia page](https://en.wikipedia.org/wiki/Pythagorean_expectation))



## Pythagorean win ratio



FanGraphs ["BaseRuns" page](https://www.fangraphs.com/depthcharts.aspx?position=BaseRuns)

* [Pythagorean Win-Loss](https://www.fangraphs.com/library/principles/expected-wins-and-losses/)

* [Pythagorean Win-Loss](https://www.fangraphs.com/library/team-record-pythagorean-record-and-base-runs/)

* See also ["BaseRuns" definition](https://www.fangraphs.com/library/features/baseruns/) for alternative measure


### function

```{r}

winexp_fun <- function(RS, RA) {
  winratio <- RS^2 / (RS^2 + RA^2)
}

```


test

```{r}

RS <- 4.43
RA <- 4.18


winexp_fun(RS, RA)

```

## Empirical test

```{r}

data(Teams)

head(Teams)

Teams_sel <- Teams %>%
  filter(yearID > 1961) %>%
  rename(RS = R) %>%
  mutate(winpct = W / G)

Teams_sel <- Teams_sel %>%
  mutate(winpct_Pyth = winexp_fun(RS, RA))


head(Teams_sel)

```


#### plot

Use ggplot2 to look at the relationship between the Pythagorean estimate and the true value.

```{r}

ggplot(data = Teams_sel) +
  geom_point(mapping = aes(x = winpct_Pyth, y = winpct))

```


#### The regression model

```{r}

winexp_mod <- lm(winpct_Pyth ~ winpct, Teams_sel)

print(winexp_mod)

summary(winexp_mod)

```




